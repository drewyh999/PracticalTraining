webpackJsonp([2],{"1Q6X":function(t,e,i){t.exports=i.p+"static/img/background.1503a0a.png"},GRXg:function(t,e){},LcIa:function(t,e){},"b//t":function(t,e){},tvR6:function(t,e){},"v+5l":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),n={name:"App",data:function(){return{backgroundsrc:i("1Q6X")}}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view",{staticStyle:{position:"absolute",width:"100%","z-index":"10",height:"100%"}}),this._v(" "),e("el-image",{staticStyle:{position:"absolute","z-index":"0",width:"100%",height:"100%"},attrs:{src:this.backgroundsrc,fit:this.fit}})],1)},staticRenderFns:[]};var a=i("VU/8")(n,o,!1,function(t){i("b//t")},null,null).exports,r=i("/ocq"),l={name:"login",data:function(){return{phone:"",key:"",usertype:"",isValid:0,isloading:!1}},methods:{check:function(){var t=this;""!==this.phone&&""!==this.key?(this.isloading=!0,console.log(this.phone),console.log(this.key),this.axios.post("http://120.78.87.173:8080/user/login",{phone:this.phone,key:this.key}).then(function(e){if(console.log(e),console.log(e.data),console.log(e.data.data),400===e.data.status)return t.$message.error("用户名或者密码错误"),void(t.isloading=!1);"admin"===e.data.data.role&&(window.location.href="http://120.78.87.173:10001"),"customer"===e.data.data.role&&(window.location.href="index.html?phone="+t.phone)}).catch(function(t){console.log(t)})):this.$message.error("请填写完整的信息")},toregister:function(){this.$router.push("/register/true")}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"card-wrapper"},[i("div",{staticClass:"inner-wrapper"},[i("el-form",{attrs:{"label-width":"80px"}},[i("el-form-item",[i("h1",[t._v("欢迎登陆")])]),t._v(" "),i("el-form-item",{attrs:{label:"手机号"}},[i("el-input",{model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"密码"}},[i("el-input",{attrs:{type:"password"},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}})],1),t._v(" "),i("el-form-item",[i("el-row",{attrs:{gutter:"5"}},[i("el-col",{attrs:{span:"12"}},[i("el-button",{staticStyle:{width:"100%"},attrs:{type:"warning",loading:this.isloading},on:{click:function(e){return t.check()}}},[t._v("登陆")])],1),t._v(" "),i("el-col",{attrs:{span:"12"}},[i("el-button",{staticStyle:{width:"100%"},attrs:{type:"warning"},on:{click:function(e){return t.toregister()}}},[t._v("\n            注册\n          ")])],1)],1)],1),t._v(" "),i("el-form-item",[i("router-link",{attrs:{to:"/register/false"}},[t._v("找回密码")])],1)],1)],1)])])},staticRenderFns:[]};var u=i("VU/8")(l,c,!1,function(t){i("GRXg")},"data-v-2d023e92",null).exports,h={name:"register",data:function(){return{user:"",key:"",phone:"",code:"",verification:"",btn_msg:"获取验证码",isloading:!1}},methods:{sanitycheck:function(){this.key!==this.verification&&""!==this.key?this.$message.error("两次密码输入不匹配"):this.key===this.verification&&""!==this.key&&this.$message({message:"两次密码输入匹配",type:"success"})},getcode:function(){""!==this.phone?(this.axios.post("http://120.78.87.173:8080/user/getCode",{phone:this.phone}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),this.btn_msg="验证码已发送"):alert("请先输入电话号码")},submit:function(){var t=this;"true"===this.$route.params.isregister?""===this.phone||""===this.code||""===this.key||""===this.user||this.key!==this.verification&&""!==this.key?alert("信息尚未填写完整"):(this.isloading=!0,this.axios.post("http://120.78.87.173:8080/user/register",{user:this.user,key:this.key,phone:this.phone,code:this.code}).then(function(e){console.log(e),400===e.data.status&&alert("验证码错误"),401===e.data.status&&alert("手机号已经被注册"),404===e.data.status?alert("服务器404错误"):(alert("注册成功"),t.$router.back()),t.btn_msg="获取验证码",t.isloading=!1}).catch(function(t){console.log(t)})):""===this.phone||""===this.code||""===this.key||this.key!==this.verification&&""!==this.key?alert("信息尚未填写完整"):(this.isloading=!0,this.axios.post("http://120.78.87.173:8080/user/retrievePassword",{key:this.key,phone:this.phone,code:this.code}).then(function(e){console.log(e),400===e.status&&alert("验证码错误"),401===e.status&&alert("用户不存在"),404===e.status?alert("服务器404错误"):(alert("重设密码成功"),t.$router.back()),t.btn_msg="获取验证码",t.isloading=!1}).catch(function(t){console.log(t)}))},goback:function(){this.$router.back()}}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"card-wrapper"},[i("div",{staticClass:"inner-wrapper"},[i("el-form",{attrs:{"label-width":"100px"}},[i("el-form-item",[i("template",{slot:"label"},[i("el-col",{attrs:{span:"3"}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-back",circle:""},on:{click:function(e){return t.goback()}}})],1)],1),t._v(" "),i("el-col",{attrs:{span:"6"}},["true"===this.$route.params.isregister?i("h3",[t._v("注册新用户")]):i("h3",[t._v("找回密码")])])],2),t._v(" "),"true"===this.$route.params.isregister?i("el-form-item",{attrs:{label:"用户名"}},[i("el-input",{model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"手机号"}},[i("el-row",[i("el-input",{model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"设置密码"}},[i("el-row",[i("el-input",{attrs:{type:"password"},on:{blur:function(e){return t.sanitycheck()}},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}})],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"再次输入密码"}},[i("el-input",{attrs:{type:"password"},on:{blur:function(e){return t.sanitycheck()}},model:{value:t.verification,callback:function(e){t.verification=e},expression:"verification"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"验证码"}},[i("el-row",{attrs:{gutter:"5"}},[i("el-col",{attrs:{span:"10"}},[i("el-input",{model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1),t._v(" "),i("el-col",{attrs:{span:"5"}},[i("el-button",{attrs:{name:"the_btn",disabled:"验证码已发送"===t.btn_msg},on:{click:function(e){return t.getcode()}}},[t._v(t._s(t.btn_msg))])],1)],1)],1),t._v(" "),i("el-form-item",[i("el-button",{staticStyle:{width:"100%"},attrs:{type:"warning",loading:t.isloading},on:{click:function(e){return t.submit()}}},[t._v("提交")])],1)],1)],1)])])},staticRenderFns:[]};var d=i("VU/8")(h,p,!1,function(t){i("LcIa")},"data-v-7738699e",null).exports;s.default.use(r.a);var f=new r.a({routes:[{path:"/",name:"login",component:u},{path:"/register/:isregister",name:"register",component:d}]}),m=i("zL8q"),g=i.n(m),v=(i("tvR6"),i("mtWM")),k=i.n(v),b=i("Rf8U"),y=i.n(b);s.default.use(y.a,k.a),s.default.use(g.a),s.default.config.productionTip=!1,k.a.defaults.withCredentials=!0,new s.default({el:"#app",router:f,components:{App:a},template:"<App/>"})}},["v+5l"]);
//# sourceMappingURL=register&login.27af5d76e63d87b7154e.js.map