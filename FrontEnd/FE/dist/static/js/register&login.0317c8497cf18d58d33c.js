webpackJsonp([2],{IPek:function(t,e){},LcIa:function(t,e){},Tjiy:function(t,e){},tvR6:function(t,e){},"v+5l":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=s("VU/8")({name:"App"},i,!1,function(t){s("IPek")},null,null).exports,a=s("/ocq"),r={name:"login",data:function(){return{phone:"",key:"",usertype:"",isValid:0,isloading:!1}},methods:{check:function(){var t=this;""!==this.phone&&""!==this.key?(this.isloading=!0,console.log(this.phone),console.log(this.key),this.axios.post("http://120.78.87.173:8080/user/login",{phone:this.phone,key:this.key}).then(function(e){console.log(e),console.log(e.data),console.log(e.data.data),e.data.data.role,400===e.data.status&&(t.$message.error("用户名或者密码错误"),t.isloading=!1),"customer"===e.data.data.role&&(window.location.href="index.html?phone="+t.phone)}).catch(function(t){console.log(t)})):this.$message.error("请填写完整的信息")},toregister:function(){this.$router.push("/register/true")}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"card-wrapper"},[s("div",{staticClass:"inner-wrapper"},[s("el-form",{attrs:{"label-width":"80px"}},[s("el-form-item",[s("h1",[t._v("欢迎登陆")])]),t._v(" "),s("el-form-item",{attrs:{label:"手机号"}},[s("el-input",{model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"密码"}},[s("el-input",{attrs:{type:"password"},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}})],1),t._v(" "),s("el-form-item",[s("el-row",{attrs:{gutter:"5"}},[s("el-col",{attrs:{span:"12"}},[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"warning",loading:this.isloading},on:{click:function(e){return t.check()}}},[t._v("登陆")])],1),t._v(" "),s("el-col",{attrs:{span:"12"}},[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"warning"},on:{click:function(e){return t.toregister()}}},[t._v("\n            注册\n          ")])],1)],1)],1),t._v(" "),s("el-form-item",[s("router-link",{attrs:{to:"/register/false"}},[t._v("找回密码")])],1)],1)],1)])])},staticRenderFns:[]};var c=s("VU/8")(r,l,!1,function(t){s("Tjiy")},"data-v-1fe8d03f",null).exports,u={name:"register",data:function(){return{user:"",key:"",phone:"",code:"",verification:"",btn_msg:"获取验证码",isloading:!1}},methods:{sanitycheck:function(){this.key!==this.verification&&""!==this.key?this.$message.error("两次密码输入不匹配"):this.key===this.verification&&""!==this.key&&this.$message({message:"两次密码输入匹配",type:"success"})},getcode:function(){""!==this.phone?(this.axios.post("http://120.78.87.173:8080/user/getCode",{phone:this.phone}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),this.btn_msg="验证码已发送"):alert("请先输入电话号码")},submit:function(){var t=this;"true"===this.$route.params.isregister?""===this.phone||""===this.code||""===this.key||""===this.user||this.key!==this.verification&&""!==this.key?alert("信息尚未填写完整"):(this.isloading=!0,this.axios.post("http://120.78.87.173:8080/user/register",{user:this.user,key:this.key,phone:this.phone,code:this.code}).then(function(e){console.log(e),400===e.data.status&&alert("验证码错误"),401===e.data.status&&alert("手机号已经被注册"),404===e.data.status?alert("服务器404错误"):(alert("注册成功"),t.$router.back()),t.btn_msg="获取验证码",t.isloading=!1}).catch(function(t){console.log(t)})):""===this.phone||""===this.code||""===this.key||this.key!==this.verification&&""!==this.key?alert("信息尚未填写完整"):(this.isloading=!0,this.axios.post("http://120.78.87.173:8080/user/retrievePassword",{key:this.key,phone:this.phone,code:this.code}).then(function(e){console.log(e),400===e.status&&alert("验证码错误"),401===e.status&&alert("用户不存在"),404===e.status?alert("服务器404错误"):(alert("重设密码成功"),t.$router.back()),t.btn_msg="获取验证码",t.isloading=!1}).catch(function(t){console.log(t)}))},goback:function(){this.$router.back()}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"card-wrapper"},[s("div",{staticClass:"inner-wrapper"},[s("el-form",{attrs:{"label-width":"100px"}},[s("el-form-item",[s("template",{slot:"label"},[s("el-col",{attrs:{span:"3"}},[s("el-button",{attrs:{type:"primary",icon:"el-icon-back",circle:""},on:{click:function(e){return t.goback()}}})],1)],1),t._v(" "),s("el-col",{attrs:{span:"6"}},["true"===this.$route.params.isregister?s("h3",[t._v("注册新用户")]):s("h3",[t._v("找回密码")])])],2),t._v(" "),"true"===this.$route.params.isregister?s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})],1):t._e(),t._v(" "),s("el-form-item",{attrs:{label:"手机号"}},[s("el-row",[s("el-input",{model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"设置密码"}},[s("el-row",[s("el-input",{attrs:{type:"password"},on:{blur:function(e){return t.sanitycheck()}},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"再次输入密码"}},[s("el-input",{attrs:{type:"password"},on:{blur:function(e){return t.sanitycheck()}},model:{value:t.verification,callback:function(e){t.verification=e},expression:"verification"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"验证码"}},[s("el-row",{attrs:{gutter:"5"}},[s("el-col",{attrs:{span:"10"}},[s("el-input",{model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1),t._v(" "),s("el-col",{attrs:{span:"5"}},[s("el-button",{attrs:{name:"the_btn",disabled:"验证码已发送"===t.btn_msg},on:{click:function(e){return t.getcode()}}},[t._v(t._s(t.btn_msg))])],1)],1)],1),t._v(" "),s("el-form-item",[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"warning",loading:t.isloading},on:{click:function(e){return t.submit()}}},[t._v("提交")])],1)],1)],1)])])},staticRenderFns:[]};var p=s("VU/8")(u,h,!1,function(t){s("LcIa")},"data-v-7738699e",null).exports;n.default.use(a.a);var d=new a.a({routes:[{path:"/",name:"login",component:c},{path:"/register/:isregister",name:"register",component:p}]}),f=s("zL8q"),m=s.n(f),v=(s("tvR6"),s("mtWM")),g=s.n(v),k=s("Rf8U"),y=s.n(k);n.default.use(y.a,g.a),n.default.use(m.a),n.default.config.productionTip=!1,g.a.defaults.withCredentials=!0,new n.default({el:"#app",router:d,components:{App:o},template:"<App/>"})}},["v+5l"]);
//# sourceMappingURL=register&login.0317c8497cf18d58d33c.js.map